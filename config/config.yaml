# Basic dirs
wdir: "/vol/cloud/christiane/Repos/Misc/taxdb-integration"
rdir: "/vol/cloud/christiane/NCBI_taxdb_integration/Testing4"
cdir: "/vol/cloud/christiane/NCBI_taxdb_integration/Testing4/coarse"
# wdir: "/home/chh/Documents/Repos/taxdb-integration"
# rdir: "/home/chh/Documents/Projects/NCBI_taxdb_integration/Testing7"

# Default parameters
threads: 1

# select from which sources to combine the high resolution database
include_ncbi: "yes"
inlcude_gtdb: "yes"
include_checkv: "yes"

# Define wildcard values for NCBI partitions
library_name:
  - fungi
  - invertebrate
  #- plant
  #- protozoa
  - vertebrate_mammalian
  - vertebrate_other

library_highres:
  - fungi
  - protozoa
  #- plant

library_coarse:
  - vertebrate_mammalian
  - vertebrate_other
  - invertebrate

# Parameters for downloading files
download_threads: 16

# Parameters for processing NCBI genomes
ncbi_server: "http://ftp.ncbi.nlm.nih.gov"
assembly_level:
  fungi: "variable"
  invertebrate: "variable"
  plant: "variable"
  protozoa: "variable"
  vertebrate_mammalian: "variable"
  vertebrate_other: "variable"

# Parameters for processing viral genomes (checkV)
checkv_link: "https://portal.nersc.gov/CheckV/checkv-db-v0.6/genome_db"

# Parameters for processing GTDB genomes
gtdb_link: "https://data.ace.uq.edu.au/public/gtdb/data/releases/latest"

# Parameters for filtering assemblies based on contig stats
filter_ncbi_fields:
  fungi: "genome_size,gc_avg,ctg_L50"
  protozoa: "genome_size,gc_avg,ctg_L50"

filter_ncbi_abs:
  fungi: "-1,-1,-1"
  protozoa: "-1,-1,-1"

filter_ncbi_rel:
  fungi: "0.1,0.1,0.1"
  protozoa: "0.1,0.1,0.1"

filter_ncbi_dif:
  fungi: "0.1,1,0.25"
  protozoa: "0.1,1,0.25"

filter_ncbi_sign:
  fungi: "greater,both,greater"
  protozoa: "greater,both,greater"

# Optional: include custom assemblies
custom_ncbi:
  fungi: "/vol/cloud/christiane/NCBI_taxdb_integration/Testing4/fungi/assembly_taxonomy_user.txt"
  protozoa: ""

custom_gtdb: ""

custom_checkv: ""

# Parameters for dereplicating genomes
derep_threads: 32

derep_lineage_exclude:
  fungi: ""
  invertebrate: ""
  plant: "p__Streptophyta"
  protozoa: ""
  vertebrate_mammalian: ""
  vertebrate_other: ""

z_threshold_gtdb: 2
m_threshold_gtdb: 0.01
gtdb_derep_chunks: 5

z_threshold_ncbi:
  fungi: 2
  invertebrate: 2
  plant: 2
  protozoa: 2
  vertebrate_mammalian: 2
  vertebrate_other: 2
  viral: 2
m_threshold_ncbi:
  fungi: 0.01
  invertebrate: 0.01
  plant: 0.01
  protozoa: 0.01
  vertebrate_mammalian: 0.01
  vertebrate_other: 0.01
  viral: 0.01
ncbi_derep_chunks:
  fungi: 5
  invertebrate: 5
  plant: 5
  protozoa: 5
  vertebrate_mammalian: 5
  vertebrate_other: 5
  viral: 10

z_threshold_checkv: 2
m_threshold_checkv: 0.01
checkv_derep_chunks: 5

# Parameters for formatting taxonomy
tax_script: "/vol/cloud/christiane/Repos/Metagenomics-Index-Correction/tax_from_gtdb.py"

# optional: conterminator for high-res database (if applicable, choose combination of below)
# prokaryotes: bacteria and archaea (GTDB)
# fungi: fungi
# protists: protozoa and algae (plants that are not Streptophytes)
# plants: Streptophytes
# metazoa: higher (non-plant) eukaryotes
kingdoms: "prokaryotes,fungi,protists,plants,metazoa"

# Include UniVec databases
univec: "UniVec_Core"

# Parameters for building krakendb
masking_threads: 32
krakenbuild_threads: 32
kmer_len: 27
minimizer_len: 25
minimizer_spaces: 4

# Parameter sweep
ps_kmer_length:
  - 35
  - 25
ps_minimizer_length:
  - 23
ps_minimizer_spaces:
  - 4
kraken_classify_threads: 16

# settings for coarse DB
rank_coarse:
  fungi: "family"
  invertebrate: "class"
  plant: "family"
  protozoa: "family"
  vertebrate_mammalian: "class"
  vertebrate_other: "class"

coarse_sublineage:
  fungi: ""
  invertebrate: ""
  plant: "p__Streptophyta"
  protozoa: ""
  vertebrate_mammalian: ""
  vertebrate_other: ""

rank_sublineage:
  fungi: "family"
  invertebrate: "class"
  plant: "class"
  protozoa: "family"
  vertebrate_mammalian: "class"
  vertebrate_other: "class"

nmax_coarse: 3

# maximum memory for conterminator
cmem: "350G"

